<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>日语水平测试 | Japanese Level Quiz</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'primary': '#3b82f6',
            'primary-dark': '#1d4ed8',
            'secondary': '#6366f1',
            'accent': '#10b981',
          },
          boxShadow: {
            'soft': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
          },
        }
      }
    }
  </script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    /* 循环渐变动画样式 - 使渐变更明显：添加更多颜色对比，增大background-size，调整动画时长 */
    .animated-gradient {
      background: linear-gradient(270deg, #3b82f6, #1d4ed8, #6366f1, #ef4444, #eab308, #3b82f6);
      background-size: 600% 600%;
      animation: gradient-animation 15s ease infinite;
    }
    @keyframes gradient-animation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    /* 优化UI: 添加过渡效果 */
    button {
      transition: all 0.3s ease;
    }
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    /* 进度条动画 */
    .progress-bar {
      transition: width 0.5s ease-in-out;
    }
    /* 整体卡片效果 */
    #app {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 animated-gradient text-gray-800">
<div id="app" class="bg-white rounded-2xl p-8 max-w-3xl w-full">
  <!-- 动态内容将通过 JS 渲染 -->
</div>

<script>
  // =============== 去重后的题目（30题） ===============
  const questions = [
    { id: 1, type: 'multiple', question: '「学校」的正确读音是？', questionJp: '「学校」の正しい読み方は？', options: ['こうがっこ', 'がっこう', 'がっこうう', 'かっこう'], correctAnswer: 'がっこう' },
    { id: 2, type: 'multiple', question: '「朋友」的正确读音是？', questionJp: '「友達」の正しい読み方は？', options: ['ともだち', 'ともたち', 'ゆうだち', 'ゆうたち'], correctAnswer: 'ともだち' },
    { id: 3, type: 'multiple', question: '「老师」的正确读音是？', questionJp: '「先生」の正しい読み方は？', options: ['んせせい', 'せんせい', 'せんせ', 'せんせいう'], correctAnswer: 'せんせい' },
    { id: 4, type: 'multiple', question: '「学习」的正确读音是？', questionJp: '「勉強」の正しい読み方は？', options: ['べょんきう', 'べんきょ', 'べんきょうう', 'へんきょう'], correctAnswer: 'べんきょう' },
    { id: 5, type: 'multiple', question: '「非常喜欢」的正确读音是？', questionJp: '「大好き」の正しい読み方は？', options: ['だいすき', 'たいすき', 'だいすく', 'たいすく'], correctAnswer: 'だいすき' },
    { id: 6, type: 'truefalse', question: '「食べる」读作「たべる」。', questionJp: '「食べる」は「たべる」と読みます。', correctAnswer: true },
    { id: 7, type: 'truefalse', question: '「行く」读作「いく」。', questionJp: '「行く」は「いんく」と読みます。', correctAnswer: false },
    { id: 8, type: 'truefalse', question: '「看」读作「みる」。', questionJp: '「見る」は「みる」と読みます。', correctAnswer: true },
    { id: 9, type: 'truefalse', question: '「写」读作「かく」。', questionJp: '「書く」は「かべ」と読みます。', correctAnswer: false },
    { id: 10, type: 'truefalse', question: '「说话」读作「はなす」。', questionJp: '「話す」は「はなす」と読みます。', correctAnswer: true },
    { id: 11, type: 'multiple', question: '「日语」的正确读音是？', questionJp: '「日本語」の正しい読み方は？', options: ['ほんにご', 'にほんご', 'にっぽんご', 'にほんこ'], correctAnswer: 'にほんご' },
    { id: 12, type: 'multiple', question: '「家人」的正确读音是？', questionJp: '「家族」の正しい読み方は？', options: ['かぞく', 'かく', 'かぞくう', 'がぞく'], correctAnswer: 'かぞく' },
    { id: 13, type: 'multiple', question: '「时间」的正确读音是？', questionJp: '「時間」の正しい読み方は？', options: ['じかん', 'かんじ', 'じかんん', 'しけん'], correctAnswer: 'じかん' },
    { id: 14, type: 'multiple', question: '「今天」的正确读音是？', questionJp: '「今日」の正しい読み方は？', options: ['ょうし', 'きょう', 'きょ', 'きょうう'], correctAnswer: 'きょう' },
    { id: 15, type: 'multiple', question: '「明天」的正确读音是？', questionJp: '「明日」の正しい読み方は？', options: ['したあ', 'あした', 'あす', 'みょうにち'], correctAnswer: 'あした' },
    { id: 16, type: 'truefalse', question: '「水」读作「みず」。', questionJp: '「水」は「みず」と読みます。', correctAnswer: true },
    { id: 17, type: 'truefalse', question: '「火」读作「ひ」。', questionJp: '「火」は「ひ」と読みます。', correctAnswer: true },
    { id: 18, type: 'truefalse', question: '「山」读作「やま」。', questionJp: '「山」は「やんき」と読みます。', correctAnswer: false },
    { id: 19, type: 'truefalse', question: '「河」读作「かわ」。', questionJp: '「川」は「かわ」と読みます。', correctAnswer: true },
    { id: 20, type: 'truefalse', question: '「花」读作「はな」。', questionJp: '「花」は「はんせ」と読みます。', correctAnswer: false },
    { id: 21, type: 'multiple', question: '「电车」的正确读音是？', questionJp: '「電車」の正しい読み方は？', options: ['しでんゃ', 'でんしゃ', 'でんしゃあ', 'てんしゃ'], correctAnswer: 'でんしゃ' },
    { id: 22, type: 'multiple', question: '「车站」的正确读音是？', questionJp: '「駅」の正しい読み方は？', options: ['えき', 'えんき', 'えきい', 'えっき'], correctAnswer: 'えき' },
    { id: 23, type: 'multiple', question: '「电话」的正确读音是？', questionJp: '「電話」の正しい読み方は？', options: ['でんわ', 'んわ', 'でんわあ', 'てんわ'], correctAnswer: 'でんわ' },
    { id: 24, type: 'multiple', question: '「报纸」的正确读音是？', questionJp: '「新聞」の正しい読み方は？', options: ['しんぶん', 'しぶん', 'しんぷん', 'しんぶんん'], correctAnswer: 'しんぶん' },
    { id: 25, type: 'multiple', question: '「杂志」的正确读音是？', questionJp: '「雑誌」の正しい読み方は？', options: ['ざし', 'ざっし', 'ざっしい', 'さっし'], correctAnswer: 'ざっし' },
    { id: 26, type: 'truefalse', question: '「书」读作「ほん」。', questionJp: '「本」は「ほん」と読みます。', correctAnswer: true },
    { id: 27, type: 'truefalse', question: '「铅笔」读作「えんぴつ」。', questionJp: '「鉛筆」は「えんぴつ」と読みます。', correctAnswer: true },
    { id: 28, type: 'truefalse', question: '「桌子」读作「つくえ」。', questionJp: '「机」は「つくえ」と読みます。', correctAnswer: true },
    { id: 29, type: 'truefalse', question: '「椅子」读作「いす」。', questionJp: '「椅子」は「いす」と読みます。', correctAnswer: true },
    { id: 30, type: 'truefalse', question: '「窗户」读作「まど」。', questionJp: '「窓」は「しい」と読みます。', correctAnswer: false }
  ];

  // =============== 角色映射 ===============
  const characterMap = {
    '1岁以下': { cn: '野原ひろし（或 ひまわり）', jp: '野原ひろし / ひまわり', img: '1.jpg' },
    '2岁': { cn: '野原新之助', jp: '野原しんのすけ', img: '2.jpg' },
    '3岁': { cn: '野原新之助', jp: '野原しんのすけ', img: '3.jpg' },
    '4岁': { cn: '埼玉', jp: 'サイタマ', img: '4.jpg' },
    '5岁': { cn: '蒙奇·D·路飞', jp: 'モンキー・D・ルフィ', img: '5.jpg' },
    '6岁以上': { cn: '夏目贵志', jp: '夏目貴志', img: '6.jpg' }
  };

  // =============== 状态 ===============
  let currentQuestion = 0;
  const answers = {};
  let score = 0;

  // =============== 工具函数 ===============
  function getJapaneseAgeLevel(score) {
    if (score >= 26) return '6岁以上';
    if (score >= 21) return '5岁';
    if (score >= 16) return '4岁';
    if (score >= 11) return '3岁';
    if (score >= 6) return '2岁';
    return '1岁以下';
  }

  function getJapaneseAgeLevelJp(score) {
    if (score >= 26) return '6歳以上';
    if (score >= 21) return '5歳';
    if (score >= 16) return '4歳';
    if (score >= 11) return '3歳';
    if (score >= 6) return '2歳';
    return '1歳以下';
  }

  function render() {
    const app = document.getElementById('app');
    const currentQ = questions[currentQuestion];
    const progress = ((currentQuestion + 1) / questions.length) * 100;

    if (currentQuestion >= questions.length) {
      // 计算分数
      score = 0;
      for (let i = 0; i < questions.length; i++) {
        if (answers[i] === questions[i].correctAnswer) {
          score++;
        }
      }

      const levelCn = getJapaneseAgeLevel(score);
      const levelJp = getJapaneseAgeLevelJp(score);
      const char = characterMap[levelCn];

      app.innerHTML = `
          <div class="text-center mb-8">
            <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-soft">
              <span class="text-4xl">🎯</span>
            </div>
            <h2 class="text-3xl font-bold mb-3">
              测试结果<br>
              <span class="text-base font-normal text-gray-600">テスト結果</span>
            </h2>
            <p class="text-gray-600 mb-6 text-lg">
              您的日语水平<br>
              <span class="text-sm text-gray-500">あなたの日本語レベル</span>
            </p>
            <div class="bg-blue-50 rounded-2xl p-6 mb-8 shadow-soft">
              <p class="text-4xl font-bold text-primary mb-2">${levelCn}</p>
              <p class="text-xl text-gray-600 mb-4">${levelJp}</p>
              <p class="text-xl text-gray-700 mb-6">
                得分: ${score}/${questions.length}<br>
                <span class="text-base text-gray-500">得点: ${score}/${questions.length}</span>
              </p>
              <div class="mb-6">
                <img src="file/${char.img}" alt="${char.cn}" class="mx-auto rounded-xl shadow-md max-w-[150px] max-h-[150px] object-contain" />
              </div>
              <p class="font-bold text-xl text-gray-800">${char.cn}</p>
              <p class="text-base text-gray-600 mb-2">${char.jp}</p>
              <p class="mt-4 text-lg text-gray-700">您的日语水平和他相当！</p>
            </div>
          </div>
          <button onclick="resetTest()" class="w-full animated-gradient text-white font-bold py-4 px-6 rounded-2xl transition duration-300 flex items-center justify-center shadow-soft hover:shadow-lg">
            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path></svg>
            再次测试<br>
            <span class="text-sm ml-2">もう一度テストする</span>
          </button>
        `;
      return;
    }

    // 渲染题目
    let optionsHtml = '';
    if (currentQ.type === 'multiple') {
      optionsHtml = currentQ.options.map((opt, idx) => `
          <button
            onclick="selectOption('${opt}')"
            class="w-full text-left p-5 border-2 ${answers[currentQuestion] === opt ? 'border-primary bg-blue-50' : 'border-gray-200'} rounded-2xl hover:border-blue-300 hover:bg-blue-50 transition duration-200 shadow-soft mb-4 last:mb-0"
          >
            <span class="text-xl">${opt}</span>
          </button>
        `).join('');
      optionsHtml += `
          <div class="mt-8 text-right">
            <button
              onclick="nextQuestion()"
              ${answers[currentQuestion] === undefined ? 'disabled' : ''}
              class="${answers[currentQuestion] === undefined ? 'bg-gray-300 cursor-not-allowed' : 'animated-gradient'} text-white font-bold py-4 px-8 rounded-2xl transition duration-300 flex items-center shadow-soft hover:shadow-lg"
            >
              下一步<br>
              <span class="text-sm ml-2">次へ</span>
              <svg class="w-6 h-6 ml-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>
          </div>
        `;
    } else {
      optionsHtml = `
          <div class="grid grid-cols-2 gap-4">
            <button
              onclick="handleTrueFalse(true)"
              class="p-5 border-2 border-gray-200 rounded-2xl hover:border-accent hover:bg-green-50 transition duration-200 shadow-soft"
            >
              <div class="text-center">
                <div class="text-2xl font-bold text-accent mb-2">○</div>
                <div class="font-bold text-lg">正确</div>
                <div class="text-sm text-gray-600">正しい</div>
              </div>
            </button>
            <button
              onclick="handleTrueFalse(false)"
              class="p-5 border-2 border-gray-200 rounded-2xl hover:border-red-300 hover:bg-red-50 transition duration-200 shadow-soft"
            >
              <div class="text-center">
                <div class="text-2xl font-bold text-red-600 mb-2">×</div>
                <div class="font-bold text-lg">错误</div>
                <div class="text-sm text-gray-600">間違い</div>
              </div>
            </button>
          </div>
        `;
    }

    app.innerHTML = `
        <div class="mb-8">
          <div class="flex justify-between text-base text-gray-600 mb-3 font-medium">
            <span>
              问题 ${currentQuestion + 1}/${questions.length}<br>
              <span class="text-sm text-gray-500">質問 ${currentQuestion + 1}/${questions.length}</span>
            </span>
            <span>${Math.round(progress)}%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
            <div class="animated-gradient h-3 rounded-full progress-bar" style="width: ${progress}%"></div>
          </div>
        </div>
        <div class="mb-10">
          <h3 class="text-2xl font-bold mb-3 leading-relaxed">${currentQ.question}</h3>
          <p class="text-base text-gray-600">${currentQ.questionJp}</p>
        </div>
        <div class="space-y-4">
          ${optionsHtml}
        </div>
      `;
  }

  // =============== 事件处理 ===============
  function selectOption(option) {
    answers[currentQuestion] = option;
    render();
  }

  function nextQuestion() {
    if (answers[currentQuestion] !== undefined) {
      currentQuestion++;
      render();
    }
  }

  function handleTrueFalse(answer) {
    answers[currentQuestion] = answer;
    currentQuestion++;
    render();
  }

  function resetTest() {
    currentQuestion = 0;
    Object.keys(answers).forEach(key => delete answers[key]);
    score = 0;
    render();
  }

  // =============== 启动 ===============
  render();
</script>
</body>
</html>
